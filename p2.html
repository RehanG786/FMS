<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>نظام التجارة | TIJARAT SYSTEMS</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #3498db;
      --secondary-color: #2ecc71;
      --background-color: #f5f7fa;
      --text-color: #34495e;
    }

    /* Global Styles */
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--background-color);
      color: var(--text-color);
      transition: background-color 0.3s ease;
    }

    .container-fluid {
      padding: 0;
    }

    /* Header Styles */
    header {
      background-color: var(--primary-color);
      color: #fff;
      text-align: center;
      padding: 15px 0;
      margin-bottom: 30px;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* Section Styles */
    section {
      margin: 20px;
      padding: 20px;
      background-color: #fff;
      border: 1px solid #dee2e6;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    section.dark-mode {
      background-color: #343a40;
      color: #fff;
      box-shadow: none;
    }

    section.dark-mode h2, 
    section.dark-mode h3,
    section.dark-mode label,
    section.dark-mode .btn {
      color: #fff;
    }

    /* Form Styles */
    form {
      max-width: 400px;
      margin: auto;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      font-weight: bold;
      color: var(--text-color);
      transition: color 0.3s ease;
    }

    input[type="number"],
    input[type="text"],
    select {
      padding: 10px;
      margin-top: 5px;
      border: none;
      border-bottom: 2px solid var(--primary-color);
      border-radius: 3px;
      width: 100%;
      background-color: transparent;
      transition: border-color 0.3s ease;
    }

    input[type="number"]:focus,
    input[type="text"]:focus,
    select:focus {
      border-color: var(--secondary-color);
      outline: none;
    }

    button {
      background-color: var(--secondary-color);
      color: #fff;
      border: none;
      padding: 12px 20px;
      cursor: pointer;
      border-radius: 3px;
      width: 100%;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #27ae60;
    }

    .btn-secondary {
      background-color: #6c757d;
      border-color: #6c757d;
    }

    .btn-secondary:hover {
      background-color: #5a6268;
      border-color: #545b62;
    }

    .btn-success {
      background-color: var(--secondary-color);
      border-color: var(--secondary-color);
    }

    .btn-success:hover {
      background-color: #27ae60;
      border-color: #27ae60;
    }

    /* Dark Mode Toggle */
    .dark-mode-toggle {
      position: absolute;
      top: 10px;
      right: 10px;
    }

    .dark-mode-toggle input {
      display: none;
    }

    .dark-mode-toggle label {
      display: block;
      width: 40px;
      height: 20px;
      background-color: #ccc;
      border-radius: 25px;
      position: relative;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .dark-mode-toggle label:after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      background-color: #fff;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: transform 0.3s ease;
    }

    input:checked + label {
      background-color: #343a40;
    }

    input:checked + label:after {
      transform: translateX(20px);
    }

    /* Card Styles */
    .card {
      border: none;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      background-color: #fff;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .card-header {
      background-color: var(--primary-color);
      color: #fff;
      border-radius: 15px 15px 0 0;
      padding: 15px;
    }

    .card-body {
      padding: 20px;
    }

    .card-title {
      color: var(--text-color);
    }

    .card-text {
      color: var(--text-color);
    }

    /* List Styles */
    .list-group-item {
      border: none;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 5px;
      background-color: #f1f3f5;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    /* Preloader Styles */
    .preloader-wrapper {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 1;
      visibility: visible;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    .preloader-wrapper.inactive {
      opacity: 0;
      visibility: hidden;
    }

    .preloader {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid var(--primary-color);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>
    <h1>نظام التجارة | TIJARAT SYSTEMS</h1>
    <div class="dark-mode-toggle">
      <input type="checkbox" id="dark-mode-toggle">
      <label for="dark-mode-toggle"></label>
    </div>
  </header>

  <div class="preloader-wrapper" id="preloader">
    <div class="preloader"></div>
  </div>

  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-6">
        <section id="income-expense-section">
          <h2>Record Income or Expense</h2>
          <form id="income-expense-form">
            <div class="form-group">
              <label for="transaction-type">Transaction Type:</label>
              <select id="transaction-type">
                <option value="income">Income</option>
                <option value="expense">Expense</option>
              </select>
            </div>
            <div class="form-group">
              <label for="amount">Amount:</label>
              <input type="number" id="amount" placeholder="Enter amount">
            </div>
            <div class="form-group">
              <label for="description">Description:</label>
              <input type="text" id="description" placeholder="Enter description">
            </div>
            <button type="submit" class="btn btn-primary">Add Transaction</button>
          </form>
          <div id="transaction-list">
            <h3>Transactions:</h3>
            <ul class="list-group"></ul>
          </div>
        </section>
      </div>

      <div class="col-lg-6">
        <section id="inventory-section">
          <h2>Manage Inventory</h2>
          <form id="inventory-form">
            <div class="form-group">
              <label for="product">Product Name:</label>
              <input type="text" id="product" placeholder="Enter product name">
            </div>
            <div class="form-group">
              <label for="quantity">Quantity:</label>
              <input type="number" id="quantity" placeholder="Enter quantity">
            </div>
            <div class="form-group">
              <label for="cost-price">Cost Price ($):</label>
              <input type="number" id="cost-price" placeholder="Enter cost price">
            </div>
            <div class="form-group">
              <label for="selling-price">Selling Price ($):</label>
              <input type="number" id="selling-price" placeholder="Enter selling price">
            </div>
            <button type="submit" class="btn btn-success">Add to Inventory</button>
          </form>
          <div id="inventory-list">
            <h3>Inventory:</h3>
            <ul class="list-group"></ul>
          </div>
        </section>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-6">
        <section id="expenses-section">
          <h2>Manage Expenses</h2>
          <form id="expenses-form">
            <div class="form-group">
              <label for="expense-description">Expense Description:</label>
              <input type="text" id="expense-description" placeholder="Enter expense description">
            </div>
            <div class="form-group">
              <label for="expense-amount">Expense Amount ($):</label>
              <input type="number" id="expense-amount" placeholder="Enter expense amount">
            </div>
            <button type="submit" class="btn btn-secondary">Add Expense</button>
          </form>
          <div id="expenses-list">
            <h3>Expenses:</h3>
            <ul class="list-group"></ul>
          </div>
        </section>
      </div>

      <div class="col-lg-6">
        <section id="financial-report-section">
          <h2>Financial Report</h2>
          <div id="financial-report" class="card">
            <div class="card-header">
              <h3 class="card-title">Summary:</h3>
            </div>
            <div class="card-body">
              <p>Total Income: <span id="total-income">$0.00</span></p>
              <p>Total Expenses: <span id="total-expenses">$0.00</span></p>
              <p>Profit/Loss: <span id="profit-loss">$0.00</span></p>
              <p class="payment-status">Unlock full features for Rs. 100</p>
              <button id="pay-now-btn" class="btn btn-primary">Pay Now</button>
            </div>
          </div>
          <canvas id="myChart" width="400" height="200"></canvas>
        </section>
      </div>
    </div>
  </div>

  <footer>
    <div class="container">
      <p>&copy; 2024 Financial Management System. All rights reserved.</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
   document.addEventListener('DOMContentLoaded', function() {
  let transactions = [];
  let inventory = [];
  let expenses = [];
  let myChart;

  const incomeExpenseForm = document.getElementById('income-expense-form');
  const inventoryForm = document.getElementById('inventory-form');
  const expensesForm = document.getElementById('expenses-form');
  const transactionList = document.querySelector('#transaction-list ul');
  const inventoryList = document.querySelector('#inventory-list ul');
  const expensesList = document.querySelector('#expenses-list ul');
  const totalIncomeDisplay = document.getElementById('total-income');
  const totalExpensesDisplay = document.getElementById('total-expenses');
  const profitLossDisplay = document.getElementById('profit-loss');
  const paymentStatus = document.querySelector('.payment-status');
  const payNowBtn = document.getElementById('pay-now-btn');
  const darkModeToggle = document.getElementById('dark-mode-toggle');
  const preloader = document.getElementById('preloader');

  darkModeToggle.addEventListener('change', function() {
    document.body.classList.toggle('dark-mode');
    const sections = document.querySelectorAll('section');
    sections.forEach(section => section.classList.toggle('dark-mode'));
  });

  payNowBtn.addEventListener('click', function() {
    alert('Simulating payment of Rs. 100. Unlocking full features...');
    payNowBtn.disabled = true;
    payNowBtn.textContent = 'Paid';
    paymentStatus.textContent = 'Full features unlocked.';
    document.querySelectorAll('button[disabled]').forEach((btn) => {
      btn.disabled = false;
    });
  });

  incomeExpenseForm.addEventListener('submit', function(event) {
    event.preventDefault();

    const transactionType = document.getElementById('transaction-type').value;
    const amount = parseFloat(document.getElementById('amount').value);
    const description = document.getElementById('description').value;

    if (transactionType && amount && description) {
      const transaction = {
        type: transactionType,
        amount: amount,
        description: description
      };
      transactions.push(transaction);
      updateTransactionList();
      calculateFinancials();
      incomeExpenseForm.reset();
    }
  });

  inventoryForm.addEventListener('submit', function(event) {
    event.preventDefault();

    const product = document.getElementById('product').value.trim();
    const quantity = parseInt(document.getElementById('quantity').value);
    const costPrice = parseFloat(document.getElementById('cost-price').value);
    const sellingPrice = parseFloat(document.getElementById('selling-price').value);

    if (product && quantity && costPrice && sellingPrice) {
      const item = {
        product: product,
        quantity: quantity,
        costPrice: costPrice,
        sellingPrice: sellingPrice
      };
      inventory.push(item);
      updateInventoryList();
      inventoryForm.reset();
    }
  });

  expensesForm.addEventListener('submit', function(event) {
    event.preventDefault();

    const expenseDescription = document.getElementById('expense-description').value.trim();
    const expenseAmount = parseFloat(document.getElementById('expense-amount').value);

    if (expenseDescription && expenseAmount) {
      const expense = {
        description: expenseDescription,
        amount: expenseAmount
      };
      expenses.push(expense);
      updateExpensesList();
      calculateFinancials();
      expensesForm.reset();
    }
  });

  function updateTransactionList() {
    transactionList.innerHTML = '';
    transactions.forEach(function(transaction, index) {
      const item = document.createElement('li');
      item.textContent = `${transaction.type.toUpperCase()}: $${transaction.amount.toFixed(2)} - ${transaction.description}`;
      item.classList.add('list-group-item');
      transactionList.appendChild(item);
    });
  }

  function updateInventoryList() {
    inventoryList.innerHTML = '';
    inventory.forEach(function(item, index) {
      const listItem = document.createElement('li');
      listItem.textContent = `${item.product} - Qty: ${item.quantity} - Cost: $${item.costPrice.toFixed(2)} - Sell: $${item.sellingPrice.toFixed(2)}`;
      listItem.classList.add('list-group-item');
      inventoryList.appendChild(listItem);
    });
  }

  function updateExpensesList() {
    expensesList.innerHTML = '';
    expenses.forEach(function(expense, index) {
      const item = document.createElement('li');
      item.textContent = `${expense.description} - $${expense.amount.toFixed(2)}`;
      item.classList.add('list-group-item');
      expensesList.appendChild(item);
    });
  }

  function calculateFinancials() {
    let totalIncome = 0;
    let totalExpenses = 0;

    transactions.forEach(function(transaction) {
      if (transaction.type === 'income') {
        totalIncome += transaction.amount;
      } else if (transaction.type === 'expense') {
        totalExpenses += transaction.amount;
      }
    });

    expenses.forEach(function(expense) {
      totalExpenses += expense.amount;
    });

    const profitLoss = totalIncome - totalExpenses;

    totalIncomeDisplay.textContent = `$${totalIncome.toFixed(2)}`;
    totalExpensesDisplay.textContent = `$${totalExpenses.toFixed(2)}`;
    profitLossDisplay.textContent = `$${profitLoss.toFixed(2)}`;

    updateChart(totalIncome, totalExpenses);
  }

  function updateChart(totalIncome, totalExpenses) {
    const ctx = document.getElementById('myChart').getContext('2d');

    if (myChart) {
      myChart.destroy(); // Destroy the previous chart if it exists
    }

    myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Total Income', 'Total Expenses'],
        datasets: [{
          label: 'Amount ($)',
          data: [totalIncome, totalExpenses],
          backgroundColor: [
            'rgba(54, 162, 235, 0.6)', // Income color
            'rgba(255, 99, 132, 0.6)'  // Expense color
          ],
          borderColor: [
            'rgba(54, 162, 235, 1)',
            'rgba(255, 99, 132, 1)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  }

  // Preloader
  preloader.classList.remove('inactive');
  setTimeout(function() {
    preloader.classList.add('inactive');
  }, 1500);
});
</script>
</body>
</html>